<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>İşletmeler - Kumbara Takip</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="home.css" />
  <link rel="stylesheet" href="animations.css" />
  <link rel="stylesheet" href="isletmeler.css" />
</head>
<body>
  <div class="page-container">
    <div class="mobile-frame">
      <header class="app-header">
        <div class="header-left">
          <a href="index.html" class="header-logo" aria-label="Kumbara Takip Ana Sayfa" data-dir="right">
            <img src="anasayfa-logo.png" alt="Kumbara Takip" class="logo-full" />
          </a>
        </div>
        <div class="header-right">
          <p class="user-greeting">İşletmeler</p>
        </div>
      </header>

      <main class="app-main fade-in">
        <div class="actions-row">
          <a href="isletme-ekle.html" class="btn primary" aria-label="İşletme Ekle">İşletme Ekle</a>
        </div>
        <section class="tabs">
          <button class="tab active" data-type="ISLETME">İşletme Tipi</button>
          <button class="tab" data-type="EV">Ev Tipi</button>
        </section>

        <!-- Arama Kutusu -->
        <div class="search-row">
          <input type="text" id="searchInput" placeholder="İşletme adı, sahibi veya telefon ile ara" aria-label="Kayıt arama" />
        </div>

        <!-- Toplam Kayıt Kutusu -->
        <div class="summary-row">
          <div class="summary-box"><span id="summaryCount">Toplam: 0</span></div>
        </div>

        <section id="listContainer" class="list-container">
          <!-- Dinamik liste burada render edilir -->
        </section>

        <!-- Düzenleme Popup -->
        <div id="editPopup" class="popup hidden" role="dialog" aria-modal="true" aria-labelledby="editTitle">
          <div class="popup-content scale-in">
            <h3 id="editTitle">İŞLETMEYİ DÜZENLE</h3>
            <form id="editForm">
              <div class="form-row">
                <label for="editAd">İŞLETME ADI</label>
                <input type="text" id="editAd" name="ad" maxlength="80" required />
              </div>
              <div class="form-row">
                <label for="editTip">TİP</label>
                <select id="editTip" name="tip" required>
                  <option value="ISLETME">İŞLETME TİPİ</option>
                  <option value="EV">EV TİPİ</option>
                </select>
              </div>
              <div class="form-row">
                <label for="editTelefon">TELEFON</label>
                <input type="text" id="editTelefon" name="telefon" placeholder="0000-000-00-00" maxlength="14" inputmode="numeric" autocomplete="tel" pattern="\d{4}-\d{3}-\d{2}-\d{2}" />
              </div>
              <div class="form-row">
                <label for="editSahibi">İŞLETME SAHİBİ</label>
                <input type="text" id="editSahibi" name="sahibi" maxlength="80" />
              </div>
              <div class="form-row">
                <label for="editAdres">ADRES</label>
                <textarea id="editAdres" name="adres" rows="3" maxlength="200"></textarea>
              </div>
              <div class="form-row">
                <label for="editReferans">REFERANS</label>
                <input type="text" id="editReferans" name="referans" maxlength="80" />
              </div>
              <div class="popup-actions">
                <button type="button" id="editCancel" class="btn secondary">İptal</button>
                <button type="submit" id="editSave" class="btn primary">Kaydet</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Silme Onayı Popup -->
        <div id="confirmPopup" class="popup hidden" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
          <div class="popup-content scale-in">
            <h3 id="confirmTitle">SİLMEYİ ONAYLA</h3>
            <p>Bu işletmeyi silmek istediğine emin misin?</p>
            <div class="popup-actions">
              <button type="button" id="confirmCancel" class="btn secondary">İptal</button>
              <button type="button" id="confirmOk" class="btn danger">Sil</button>
            </div>
          </div>
        </div>

        <!-- Başarı Mesajı (Toast) -->
        <div id="toast" class="toast hidden" role="status" aria-live="polite">Kayıt güncellendi.</div>
      </main>

      <nav class="bottom-nav">
        <a href="index.html" class="nav-item" data-dir="right">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
          </svg>
          <span>Ana Sayfa</span>
        </a>
        <a href="isletmeler.html" class="nav-item active">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 6H12L10 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6ZM20 18H4V8H20V18Z" fill="currentColor"/>
          </svg>
          <span>İşletmeler</span>
        </a>
        <a href="admin.html" class="nav-item">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 5C13.66 5 15 6.34 15 8C15 9.66 13.66 11 12 11C10.34 11 9 9.66 9 8C9 6.34 10.34 5 12 5ZM12 19.2C9.5 19.2 7.29 17.92 6 15.98C6.03 13.99 10 12.9 12 12.9C13.99 12.9 17.97 13.99 18 15.98C16.71 17.92 14.5 19.2 12 19.2Z" fill="currentColor"/>
          </svg>
          <span>Profil</span>
        </a>
      </nav>
    </div>
  </div>

  <script src="isletmeler.js"></script>
</body>
</html>
